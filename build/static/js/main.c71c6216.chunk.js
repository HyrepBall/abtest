(this.webpackJsonpabtest=this.webpackJsonpabtest||[]).push([[0],{262:function(e,t,a){},263:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(29),s=a.n(i),c=a(78),d=a(115),l=Object(d.b)({name:"users",initialState:{value:[],calculatedRR7Value:null},reducers:{saveUsers:function(e,t){e.value=t.payload},calculateRR7days:function(e,t){e.calculatedRR7Value=t.payload}}}),o=l.actions,u=o.saveUsers,b=o.calculateRR7days,j=l.reducer,v=Object(d.a)({reducer:{users:j}}),h=a(26),O=a(130),f=(a(264),a(175),a(131)),p=a(132),x={apiKey:"AIzaSyA51txLU6aYM8V0rTWeL0IwokfGc6srfyI",authDomain:"find-n.firebaseapp.com",projectId:"find-n",storageBucket:"find-n.appspot.com",messagingSenderId:"60751203811",appId:"1:60751203811:web:978d758ecdc619b5fb24d6",measurementId:"G-92VE78VGLY",databaseURL:""},m=a(18),y=function(e){return Object(m.jsx)(f.a,Object(h.a)(Object(h.a)({firebase:O.a},x),{},{children:Object(m.jsx)(p.b,Object(h.a)(Object(h.a)({firebase:O.a},x),{},{children:Object(m.jsx)(f.b,{children:Object(m.jsxs)(p.a,{path:"/users",children:[function(e){return console.log(e)},e.children]})})}))}))},g=a(164),_=a(101),S=a(102),R=a(116),k=a(114),I=a(134),w=a.n(I),C=a(152),D=a(99),U=a(81),N=a(140),V=a(162),F=a(270),P=a(271),Y=a(268),A=a(53),B=a(269),E=a(83),L=a.n(E),M=r.a.createContext(null);function G(){var e=Object(c.b)();return Object(m.jsx)(z,{handleSaveUsers:function(t){e(u(t))},notification:V.a,handleCalculateRR7:function(t){e(b(t))}})}var T=function(e){e.index;var t=Object(N.a)(e,["index"]),a=F.a.useForm(),n=Object(U.a)(a,1)[0];return Object(m.jsx)(F.a,{form:n,component:!1,children:Object(m.jsx)(M.Provider,{value:n,children:Object(m.jsx)("tr",Object(h.a)({},t))})})},q=function(e){var t=e.title,a=e.editable,r=e.children,i=e.dataIndex,s=e.record,c=e.handleSave,d=Object(N.a)(e,["title","editable","children","dataIndex","record","handleSave"]),l=Object(n.useState)(!1),o=Object(U.a)(l,2),u=o[0],b=o[1],j=Object(n.useRef)(null),v=Object(n.useContext)(M);Object(n.useEffect)((function(){u&&j.current.focus()}),[u]);var O=function(){b(!u),v.setFieldsValue(Object(D.a)({},i,s[i]))},f=function(){var e=Object(C.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.validateFields();case 3:t=e.sent,O(),c(Object(h.a)(Object(h.a)({},s),t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),p=r;return a&&(p=u?Object(m.jsx)(F.a.Item,{style:{margin:0},name:i,rules:[{required:!0,message:"".concat(t," is required.")}],children:Object(m.jsx)(P.a,{ref:j,onPressEnter:f,onBlur:f})}):Object(m.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:O,children:r})),Object(m.jsx)("td",Object(h.a)(Object(h.a)({},d),{},{children:p}))},z=function(e){Object(R.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(_.a)(this,a),(n=t.call(this,e)).handleSave=function(e){console.log(e);var t=Object(g.a)(n.state.dataSource),a=t.findIndex((function(t){return e.key===t.key})),r=t[a];t.splice(a,1,Object(h.a)(Object(h.a)({},r),e)),n.setState({dataSource:t})},n.handleSaveOnServer=function(){var e=n.props,t=e.handleSaveUsers,a=e.notification;t(n.state.dataSource),a.success({message:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"})},n.handleCalculateRR7=function(){var e=n.props,t=e.handleCalculateRR7,a=e.handleSaveUsers,r=n.state.dataSource;L.a.defaultFormat="DD.MM.YYYY";var i=0,s=0,c=r.map((function(e){var t=e.last_activity_date.split(".").reverse();t[1]=Number(t[1])-1,t=L()(t);var a=e.registration_date.split(".").reverse();a[1]=Number(a[1])-1,a=L()(a);var n=L()(L()().format());return t.diff(a,"days")>=7&&(i+=1),n.diff(a,"days")>=7&&(s+=1),Object(h.a)(Object(h.a)({},e),{},{livePeriodInDays:t.diff(a,"days")})}));console.log("rr7returnedUsersCountAfterThenX ",i),console.log("rr7registeredUsersMoreThanX ",s),console.log((i/s*100).toFixed(2)),t((i/s*100).toFixed(2)),a(c)},n.columns=[{title:"User ID",dataIndex:"user_id",width:"20%",editable:!1},{title:"Date registration",dataIndex:"registration_date",width:"40%",editable:!0},{title:"Date Last Activity",dataIndex:"last_activity_date",width:"40%",editable:!0}],n.state={dataSource:[{key:"1",user_id:"1",registration_date:"24.12.2021",last_activity_date:"25.12.2021"},{key:"2",user_id:"2",registration_date:"05.06.2021",last_activity_date:"16.06.2021"},{key:"3",user_id:"3",registration_date:"05.06.2021",last_activity_date:"16.06.2021"},{key:"4",user_id:"4",registration_date:"05.06.2021",last_activity_date:"16.06.2021"},{key:"5",user_id:"5",registration_date:"05.06.2021",last_activity_date:"08.06.2021"},{key:"6",user_id:"6",registration_date:"05.06.2021",last_activity_date:"08.06.2021"},{key:"7",user_id:"7",registration_date:"05.06.2021",last_activity_date:"08.06.2021"},{key:"8",user_id:"8",registration_date:"05.06.2021",last_activity_date:"08.06.2021"}],count:3},n}return Object(S.a)(a,[{key:"render",value:function(){var e=this,t=this.state.dataSource,a={body:{row:T,cell:q}},n=this.columns.map((function(t){return t.editable?Object(h.a)(Object(h.a)({},t),{},{onCell:function(a){return{record:a,editable:t.editable,dataIndex:t.dataIndex,title:t.title,handleSave:e.handleSave}}}):t}));return Object(m.jsxs)("div",{children:[Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(A.a,{onClick:this.handleSaveOnServer,type:"primary",style:{marginBottom:16,marginRight:16},children:"Save"}),Object(m.jsx)(A.a,{onClick:this.handleCalculateRR7,type:"primary",style:{marginBottom:16,marginRight:16},children:"Calculate"})]}),Object(m.jsx)(B.a,{components:a,rowClassName:function(){return"editable-row"},bordered:!0,size:"small",dataSource:t,columns:n})]})}}]),a}(r.a.Component),J=a(159),X=a.n(J);function K(){var e=Object(c.c)((function(e){return e.users})),t=Object(n.useState)([]),a=Object(U.a)(t,2),r=a[0],i=a[1],s=Object(n.useState)([]),d=Object(U.a)(s,2),l=d[0],o=d[1];return Object(n.useEffect)((function(){var t,a=[];e.value.map((function(e){return a.includes(e.livePeriodInDays)||a.push(e.livePeriodInDays),null})),a.sort((function(e,t){return e-t})),t=a.map((function(t){var a=0;return e.value.map((function(e){t===e.livePeriodInDays&&(a+=1)})),a})),o(t),i(a)}),[e]),Object(m.jsxs)("div",{children:[e.calculatedRR7Value?Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("h2",{children:["Rolling Retention 7 day: ","".concat(e.calculatedRR7Value,"%")]})}):null,Object(m.jsx)(W,{seriesData:l,categories:r})]})}var W=function(e){Object(R.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(_.a)(this,a),(n=t.call(this,e)).state={options:{chart:{id:"basic-bar"},xaxis:{categories:[]}},series:[{name:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439",data:[]}]},n}return Object(S.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.seriesData,n=t.categories;(null===a||void 0===a?void 0:a.length)!==this.state.series[0].data.length&&this.setState({options:Object(h.a)(Object(h.a)({},this.state.options),{},{xaxis:Object(h.a)(Object(h.a)({},this.state.options.xaxis),{},{categories:n})}),series:[{name:this.state.series.name,data:a}]})}},{key:"render",value:function(){return Object(m.jsx)("div",{className:"app",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"mixed-chart",children:Object(m.jsx)(X.a,{options:this.state.options,series:this.state.series,type:"bar",width:"500"})})})})}}]),a}(r.a.Component);var H=function(){return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)("h2",{children:"\u0422\u0435\u0441\u0442\u043e\u0432\u043e\u0435 abtest"}),Object(m.jsx)(G,{}),Object(m.jsx)(K,{})]})};a(261),a(262);s.a.render(Object(m.jsx)(y,{children:Object(m.jsx)(c.a,{store:v,children:Object(m.jsx)(H,{})})}),document.getElementById("root"))}},[[263,1,2]]]);
//# sourceMappingURL=main.c71c6216.chunk.js.map